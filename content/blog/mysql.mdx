---
title: Banco de Dados
description: Um banco de dados SQL (Structured Query Language) √© um sistema que armazena, organiza e gerencia dados em formato estruturado, usando tabelas com linhas e colunas. Ele permite que os dados sejam consultados, inseridos, atualizados e deletados por meio da linguagem SQL. √â amplamente usado em aplica√ß√µes web, sistemas corporativos e softwares em geral por sua confiabilidade e capacidade de lidar com grandes volumes de informa√ß√£o de forma eficiente.
date: 2024-01-10
published: true
---


## O que √© um **Database** ?

Um banco de dados √© um sistema organizado para armazenar, gerenciar e recuperar dados eletr√¥nicos de maneira eficiente. Ele consiste em tabelas, onde cada linha representa uma entrada e as colunas representam atributos. Bancos de dados s√£o amplamente usados em diversas √°reas para gerenciar grandes volumes de informa√ß√µes, facilitando a organiza√ß√£o e recupera√ß√£o de dados. Sistemas de gerenciamento de banco de dados (SGBD) s√£o usados para facilitar a cria√ß√£o, manuten√ß√£o e consulta desses bancos de dados.

### Dados Estruturados e N√£o Estruturados

- **Dados Estruturados:** S√£o dados organizados em uma estrutura predefinida, geralmente em tabelas com linhas e colunas. Cada valor tem um tipo espec√≠fico e segue um esquema predefinido. Bancos de dados relacionais, onde as informa√ß√µes s√£o organizadas em tabelas, s√£o um exemplo comum de dados estruturados.
- **Dados N√£o Estruturados:** S√£o dados que n√£o seguem uma estrutura fixa ou organiza√ß√£o pr√©via. Eles podem incluir texto livre, imagens, v√≠deos e outros formatos que n√£o se encaixam facilmente em uma tabela. Redes sociais, e-mails, documentos em texto livre e m√≠dias s√£o exemplos de dados n√£o estruturados. A an√°lise desses dados geralmente requer m√©todos mais avan√ßados, como processamento de linguagem natural para texto ou reconhecimento de padr√µes para imagens e v√≠deos.

Em resumo, dados estruturados seguem uma organiza√ß√£o definida, enquanto dados n√£o estruturados carecem dessa organiza√ß√£o predefinida e podem assumir diversas formas. Ambos os tipos de dados s√£o importantes, e a capacidade de lidar com ambos √© fundamental em muitas aplica√ß√µes de an√°lise e tomada de decis√£o.

---

## Tipos de Dados Primitivos

<iframe width="768" height="432" src="https://miro.com/app/live-embed/uXjVNKZj8v0=/?moveToViewport=-474,-529,1357,1072&embedId=849347243291" frameborder="0" scrolling="no" allow="fullscreen; clipboard-read; clipboard-write" allowfullscreen></iframe>

## Comandos Mysql

Em um SGBD n√≥s utilizamos de comandos para manipular dados, como inser√ß√µes, edi√ß√µes ou visualiza√ß√µes, a seguir voc√™ ir√° aprender alguns dos comandos para manipular um banco de dados com o [MySql Workbench](https://www.mysql.com/products/workbench/).

### Criar um database

```sql
-- Forma completa
CREATE DATABASE IF NOT EXISTS nomedodatabase
DEFAULT CHARACTER SET utf8
DEFAULT COLLATE utf8_general_ci; 

-- Forma simplificada
CREATE DATABASE nomedodatabase; 

```

### Criar uma tabela

```sql
-- Forma simplificada
CREATE TABLE nomedatabela (
	nome VARCHAR(30),
	idade TINYINT(3),
	sexo CHAR(1),
	peso FLOAT,
	nacionalidade VARCHAR(20),
);

-- Forma mais completa
CREATE TABLE nomedatabela (
	id INT NOT NULL auto_increment,
	nome VARCHAR(30) NOT NULL,
	sexo ENUM('M','F'),
	peso DECIMAL(5,2),
	altura DECIMAL(3,2),
	nacionalidade VARCHAR(20) DEFAULT 'Brasil',
	PRIMARY KEY(id)
) DEFAULT CHARSET = utf8; 
```

### Deletar tabela ou database

```sql
-- Deleta o banco de dados
DROP DATABASE nomedodatabase; 

-- Deleta a tabela
DROP TABLE nomedatabela; 
```

### Inserindo dados em uma tabela

```sql
-- Formato padr√£o
INSERT INTO nomedatabela
(id, nome, nascimento, sexo, peso, altura, nacionalidade)
VALUES
(DEFAULT, 'Thiago', '2003-01-04', 'M', '59.5', '1.70', 'Brasil'); 
-- A data precisa ser no formato YYYY-MM-DD

-- Forma simplificada por√©m os dados precisam estar na mesma sequ√™ncia da tabela
INSERT INTO nomedatabela VALUES
(DEFAULT, 'Thiago', '2003-01-04', 'M', '59.5', '1.70', 'Brasil');

-- Inserindo mais de um dado por vez
INSERT INTO nomedatabela
(id, nome, nascimento, sexo, peso, altura, nacionalidade)
VALUES
(DEFAULT, 'Emanuelle', '2003-03-22', 'F', '62.3,' '1.62', 'Brasil'),
(DEFAULT, 'Andreza', '2004-04-11', 'F', '55.6', '1.59', 'Brasil'),
(DEFAULT, 'Thiago', '2003-01-04', 'M', '59.5', '1.70', 'Brasil');
```

### Descrevendo dados

```sql
DESCRIBE nomedatabela;

-- Formato simplificado
DESC nomedatabela; 
```

### Alterando campos tabela

```sql
-- Adiciona a coluna no final da tabela
ALTER TABLE nomedatabela
ADD COLUMN nomedacoluna INT; 

-- Formato simplificado
ALTER TABLE nomedatabela
ADD nomedacoluna INT; 

-- Adiciona a coluna no in√≠cio da tabela
ALTER TABLE nomedatabela
ADD COLUMN nomedacoluna INT FIRST; 

-- Adiciona a coluna ap√≥s a coluna informada
ALTER TABLE nomedatabela
ADD COLUMN nomedacoluna INT AFTER nomedeoutracoluna;

/* O modify reescreve toda a coluna ou seja, se voc√™ n√£o passar todas as contraints, 
ele ir√° deleta-las. (modify n√£o muda o nome da coluna)
*/ 
ALTER TABLE nomedatabela
MODIFY COLUMN nomedacoluna VARCHAR(20) NOT NULL DEFAULT '';

-- Reescreve toda a coluna assim como o modify por√©m da a permiss√£o de alterar o nome
ALTER TABLE nomedatabela
CHANGE COLUMN nomedacolunaatual nomedanovacoluna VARCHAR(20);
-- Esse comando √© espec√≠fico do MySQL. Em bancos como PostgreSQL ou SQL Server, o comando seria diferente.

-- Altera o nome da tabela
ALTER TABLE nomedatabela
CHANGE TO novonome;
```

### Alterando dados da tabela

```sql
-- Altera os dados da tabela onde a chave prim√°ria √© igual a 1
UPDATE nomedatabela
SET nomedocampo = 'Thiago', nomedocampo2 = '2003-01-04'
WHERE chaveprimaria = '1';

-- Deleta o registro de chave prim√°ria 1
DELETE FROM nomedatabela
WHERE chaveprimaria = '1';

-- Deleta todos os dados de uma tabela por√©m mant√©m sua estrutura
TRUNCATE TABLE nomedatabela;
```

### Utilizando o select

```sql
--Seleciona todos os campos da tabela
SELECT * FROM nomedatabela; 

--Order by ordena pelo par√¢metro passado, nesse caso, ordena pelo nome em ordem ascendente A-Z, 1-2 
SELECT * FROM nomedatabela ORDER BY nome; 

--Order by ordena pelo par√¢metro passado nesse caso, ordena pelo nome em ordem descentente Z-A, 2-1
SELECT * FROM nomedatabela ORDER BY nome DESC; 

--Seleciona tudo que atenda a condi√ß√£o no where
SELECT * FROM nomedatabela WHERE id = '13'; 
SELECT * FROM nomedatabela WHERE ano >= '2016' AND carga > '40';
SELECT * FROM nomedatabela WHERE ano >= '2016' OR carga > '40';
/* Pode receber diversos operadores l√≥gicos, os mais comuns s√£o: =, !=, <, >, <=, >=, 
por√©m tamb√©m existem o and, or e o in.
*/

-- O like procura por algo que inclua o que passano no par√¢metro
SELECT * FROM nomedatabela WHERE nome LIKE 'silva';

--O notlike √© o contr√°rio do like, procura por registros que n√£o incluam o que foi passado por par√¢metro
SELECT * FROM nomedatabela WHERE nome NOT LIKE 'silva';

/* Existem 2 "coringas" para usar no select com o like, o "%" e o "_"
O "%" significa que pode ou n√£o ter algo antes ou depois da palavra, seu uso depende da
sua localiza√ß√£o, como nos exemplos:
*/

--Ir√° buscar por tudo que termine com "silva"
SELECT * FROM nomedatabela WHERE nome LIKE '%silva';

--Ir√° buscar por tudo que come√ße com "silva"
SELECT * FROM nomedatabela WHERE nome LIKE 'silva%';

--Ir√° buscar por tudo que inclua "silva" em qualquer lugar
SELECT * FROM nomedatabela WHERE nome LIKE '%silva%';

-- Procura o que estiver entre as duas condi√ß√µes
SELECT nome, ano FROM nomedatabela WHERE ano BETWEEN 2020 AND 2024;

-- Seleciona tudo por√©m mostra somente 1 vez as linhas duplicadas
SELECT DISTINCT nacionalidade FROM nomedatabela;

-- Retorna a quantidade de items encontrados
SELECT COUNT(*) FROM nomedatabela;

--Retorna o maior valor encontrado
SELECT MAX(totalaulas) FROM cursos WHERE ano = '2016';

--Retorna o menor valor encontrado
SELECT nome, MIN(totalaulas) FROM cursos WHERE ano = '2016';

--Retorna a soma dos valores
SELECT SUM(totalaulas) FROM cursos;

--Retorna a m√©dia dos valores
SELECT AVG(totalaulas) FROM cursos;
```

## Relacionamentos, entidades e chaves

### Relacionamentos

Um relacionamento de tabelas √© uma conex√£o estabelecida entre duas ou mais tabelas em um banco de dados relacional. Esses relacionamentos permitem que os dados sejam vinculados e consultados de forma eficiente, permitindo uma melhor organiza√ß√£o e estrutura√ß√£o dos dados.

Existem diferentes tipos de relacionamentos de tabelas, como o relacionamento 1 para 1 e o relacionamento 1 para muitos. No relacionamento 1 para 1, cada registro em uma tabela est√° associado a apenas um registro correspondente na outra tabela, j√° no relacionamento 1 para muitos, um registro em uma tabela pode estar associado a v√°rios registros correspondentes em outra tabela, mas cada registro na segunda tabela est√° associado a apenas um registro na primeira tabela.

Esses relacionamentos s√£o estabelecidos usando chaves prim√°rias e chaves estrangeiras. A chave prim√°ria √© um atributo √∫nico em uma tabela que identifica exclusivamente cada registro. A chave estrangeira √© um atributo em uma tabela que faz refer√™ncia √† chave prim√°ria de outra tabela. Essas chaves s√£o usadas para conectar os dados entre as tabelas, permitindo consultas complexas que combinam informa√ß√µes de v√°rias tabelas.

Os relacionamentos de tabelas s√£o fundamentais para a modelagem de dados em um banco de dados relacional, pois permitem a representa√ß√£o de v√≠nculos entre os dados e a obten√ß√£o de informa√ß√µes mais completas e precisas por meio de consultas.

### Entidades

Um conceito fundamental em **SQL** √© o de entidades. Em um contexto de bancos de dados, uma entidade representa uma tabela, que √© uma cole√ß√£o de registros relacionados. Cada registro em uma tabela representa uma entrada individual de dados. As entidades s√£o usadas para organizar e armazenar dados de maneira estruturada e eficiente.

No **SQL**, as entidades s√£o criadas usando o comando `CREATE TABLE`, onde s√£o definidos os nomes das colunas e os tipos de dados que cada coluna pode armazenar. As entidades tamb√©m podem ser modificadas usando o comando `ALTER TABLE`, que permite adicionar, modificar ou excluir colunas de uma tabela existente.

As entidades s√£o a base para a cria√ß√£o e manipula√ß√£o de dados em um banco de dados **SQL**, permitindo a organiza√ß√£o, recupera√ß√£o e an√°lise eficiente dos dados armazenados.

---

### **Atributos SQL**

No **SQL** os atributos s√£o basicamente as colunas de uma tabela. Cada atributo corresponde a um tipo de dado espec√≠fico, como texto, n√∫mero, data, entre outros. Os atributos definem a estrutura da tabela e determinam quais tipos de valores podem ser armazenados em cada coluna.

Os atributos t√™m propriedades, como restri√ß√µes de integridade e valores padr√£o. As restri√ß√µes de integridade garantem que os dados inseridos nas colunas estejam dentro de limites espec√≠ficos, como valores m√≠nimos e m√°ximos. Os valores padr√£o especificam um valor predefinido que ser√° inserido automaticamente em uma coluna se nenhum valor for fornecido durante a inser√ß√£o de dados.

Os atributos desempenham um papel fundamental na defini√ß√£o da estrutura e organiza√ß√£o dos dados em um banco de dados **SQL**. Eles fornecem informa√ß√µes sobre os tipos de dados que podem ser armazenados, as restri√ß√µes aplicadas a esses dados e os relacionamentos entre as tabelas.

---

### Chaves prim√°rias e estrangeiras

Os atributos podem ter chaves prim√°rias e estrangeiras. A chave prim√°ria identifica exclusivamente cada registro em uma tabela e garante a integridade dos dados. As chaves estrangeiras estabelecem relacionamentos entre tabelas, permitindo que os dados sejam conectados e consultados de maneira eficiente.

As tabelas podem ter relacionamentos uns com os outros por meio de chaves estrangeiras, que s√£o colunas que fazem refer√™ncia a uma chave prim√°ria em outra tabela. Esses relacionamentos permitem a cria√ß√£o de consultas complexas que combinam dados de v√°rias tabelas. Os relacionamentos entre entidades s√£o fundamentais para modelar e representar a estrutura e os v√≠nculos dos dados em um banco de dados relacional.

---

### Relacionamento 1 para 1

Um relacionamento 1 para 1 ocorre quando uma entidade est√° diretamente relacionada a apenas uma outra entidade. Isso significa que cada registro de uma entidade est√° associado a apenas um registro da outra entidade. Em outras palavras, para cada registro em uma tabela, h√° um √∫nico registro correspondente na tabela relacionada. Esse tipo de relacionamento √© √∫til quando h√° uma depend√™ncia direta entre as entidades e √© necess√°rio garantir que cada registro tenha uma correspond√™ncia √∫nica no relacionamento.

### Relacionamento 1 para N

Um relacionamento 1 para n, ou um relacionamento um para muitos, ocorre quando uma entidade est√° diretamente relacionada a v√°rias inst√¢ncias de outra entidade. Nesse tipo de relacionamento, um registro em uma tabela pode estar associado a v√°rios registros correspondentes em outra tabela, mas cada registro na segunda tabela est√° associado a apenas um registro na primeira tabela. Esse tipo de relacionamento √© comumente utilizado para representar situa√ß√µes em que um √∫nico objeto ou entidade est√° relacionado a v√°rias inst√¢ncias de outra entidade. Por exemplo, um cliente pode ter v√°rias ordens de compra, mas cada ordem de compra est√° vinculada a apenas um cliente. Esse tipo de relacionamento √© fundamental para modelar e representar a estrutura dos dados em bancos de dados relacionais.

### Relacionamento N para N

Um relacionamento N para N, ou um relacionamento muitos para muitos, ocorre quando uma entidade est√° diretamente relacionada a v√°rias inst√¢ncias de outra entidade e vice-versa. Nesse tipo de relacionamento, v√°rios registros em uma tabela podem estar associados a v√°rios registros correspondentes em outra tabela. Esse tipo de relacionamento √© comumente utilizado para representar situa√ß√µes em que v√°rias entidades est√£o interligadas de forma complexa. Por exemplo, em um sistema de gerenciamento de estudantes e disciplinas, v√°rios estudantes podem se inscrever em v√°rias disciplinas, e cada disciplina pode ter v√°rios estudantes matriculados. Para modelar esse relacionamento, √© necess√°rio criar uma tabela intermedi√°ria que registre as associa√ß√µes entre as entidades, armazenando os identificadores das entidades relacionadas. Esse tipo de relacionamento √© fundamental para representar a estrutura dos dados em bancos de dados relacionais e permite consultas e an√°lises avan√ßadas envolvendo m√∫ltiplas entidades interligadas.

---

## Usando chaves estrangeiras e Joins

### Chaves estrangeiras

Para cadastrar uma chave estrangeira em uma tabela, primeiro precisamos identificar a rela√ß√£o como diz acima, `1 para 1`, `1 para N` ou ent√£o `N para N` , feito isso seguimos as seguintes regras:

- **1 para 1**

No relacionamento `1 para 1`, colocamos a chave estrangeira na outra entidade, como no exemplo abaixo:

![Exemplo de relacionamento 1 para 1](/blog/mysql/1to1.png)

---

- **1 para N**

No relacionamento `1 para N`, colocamos a chave estrangeira sempre no lado N, como no exemplo:

![Exemplo de relacionamento 1 para N](/blog/mysql/1toN.png)
---

- **N para N**
    
O relacionamento `N para N` √© um pouco mais complexo, precisamos criar outra entidade entre as duas que estamos relacionando e liga-las, como no exemplo abaixo:
    
![Exemplo de relacionamento N pra N](/blog/mysql/NtoN.png)

---
    

**Na pr√°tica, ligamos tabelas com chaves estrangeiras dessa maneira:**

- Primeiro criamos o campo da chave estrangeira na tabela seguindo as regras acima, lembrando que o campo precisa ser da mesma formata√ß√£o, por√©m n√£o precisa ser do mesmo nome.
    
    ```sql
    ALTER TABLE alunos ADD column cursopreferido INT;
    ```
    
- Logo ap√≥s, configuramos a nova coluna como chave estrangeira.
    
    ```sql
    ALTER TABLE alunos ADD foreing KEY (cursopreferido) REFERENCES cursos(idcurso);
    -- Configurando o campo como chave estrangeira do campo idcurso da tabela cursos.
    ```
    

Feito isso o campo j√° estar√° configurado como uma chave estrangeira!

### Utilizando o Join

O **inner join** e o **outer join** s√£o opera√ß√µes comuns usadas para combinar dados de v√°rias tabelas em consultas SQL.

- **Inner Join**
    
    O **inner join** √© usado para retornar apenas os registros que t√™m correspond√™ncia em ambas as tabelas envolvidas na jun√ß√£o. Ele combina os registros com base em uma condi√ß√£o de correspond√™ncia especificada na cl√°usula **ON**. A consulta resultante incluir√° apenas os registros que satisfazem a condi√ß√£o de jun√ß√£o. Por exemplo, se tivermos uma tabela de "clientes" e uma tabela de "pedidos", um inner join entre elas retornaria apenas os clientes que fizeram pedidos.

    Para utiliza-lo fazemos o seguinte comando:
    
    ```sql
    SELECT c.nome, p.numero 
    FROM clientes AS c INNER JOIN pedidos AS p
    ON c.idcliente = p.idcliente;
    -- Basicamente retorna os dados que tiverem rela√ß√£o, ou seja, s√≥ ir√° mostrar os clientes que tiverem um pedido.
    ```
    
    > üí° O `AS` √© utilizado para ‚Äúapelidar‚Äù uma tabela, assim facilitando na hora de escrever.

    ---
    
- **Outer Join**
    
    O **outer join** √© usado para retornar todos os registros de uma tabela, mesmo que n√£o haja correspond√™ncia na tabela relacionada. Existem tr√™s tipos de outer join: **left outer join**, **right outer join** e **full outer join**. O left outer join retorna todos os registros da tabela da esquerda e os registros correspondentes da tabela da direita. O right outer join retorna todos os registros da tabela da direita e os registros correspondentes da tabela da esquerda. O full outer join retorna todos os registros de ambas as tabelas, incluindo os registros que n√£o t√™m correspond√™ncia na tabela relacionada.
    
    Para utiliza-lo fazemos o seguinte comando:
    
    ```sql
    SELECT c.nome, p.numero 
    FROM clientes AS c LEFT OUTER JOIN pedidos AS p
    ON c.idcliente = p.idcliente;
    -- Retorna todos os dados da tabela direcionada(left, righ, full) mais as rela√ß√µes da outra tabela.
    ```
    
> üí° Tanto no `INNER JOIN` como no `OUTER JOIN`, as palavras `INNER` e `OUTER` s√£o opcionais, por√©m no `OUTER JOIN`, precisa-se referenciar a dire√ß√£o, left, right ou full.

A utiliza√ß√£o dessas opera√ß√µes de jun√ß√£o permite combinar dados de v√°rias tabelas em consultas SQL, fornecendo informa√ß√µes mais completas e precisas para an√°lise e tomada de decis√£o.
